webpackJsonp([0,6],{133:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var o,u,l=a(11),i=n(l),r=a(9),s=n(r),d=a(10),c=n(d),f=a(13),h=n(f),p=a(12),v=n(p),m=a(1),g=(n(m),a(83)),b=n(g),y=a(65),_=n(y),N=a(210),k=n(N),S=function(){return{id:"",title:"",content:""}},C=function(t){return t.startsWith("/msg/add")},M=(u=o=function(t){function e(t,a){(0,s["default"])(this,e);var n=(0,h["default"])(this,(e.__proto__||(0,i["default"])(e)).call(this,t,a));return n.state=S(),n.handleChange=_["default"].bind(n),n}return(0,v["default"])(e,t),(0,c["default"])(e,[{key:"componentDidMount",value:function(){this.updateState()}},{key:"componentWillReceiveProps",value:function(t){this.updateState(t)}},{key:"updateState",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?this.props:arguments[0],a=e.location,n=e.params.msgId,o=e.userData.username,u=e.msg.msgs;if(C(a.pathname))return this.setState(S());if(u.length){var l=u.filter(function(t){var e=t.id;return e===n})[0];return l&&l.author===o?this.setState(l):this.handleIllegal()}b["default"].fetch({msgId:n}).then(function(e){var a=e.id,n=e.title,u=e.content,l=e.author;return e&&l===o?void t.setState({id:a,title:n,content:u}):t.handleIllegal()})}},{key:"handleIllegal",value:function(){setTimeout(function(){return alert("非法访问")}),location.replace("/msg")}},{key:"handleSubmit",value:function(t){var e=this;t.preventDefault();var a=this.props.location.pathname,n=C(a)?"addMsg":"modMsg";this.updateState=function(){},this.props[n](this.state).then(function(t){var a=t.id;e.context.router.replace("/msg/detail/"+a)})}},{key:"render",value:function(){return k["default"].call(this)}}]),e}(m.Component),o.contextTypes={router:m.PropTypes.object.isRequired},u);e["default"]=M},210:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=a(7),u=n(o);e["default"]=function(){var t=this;return(0,u["default"])("form",{onSubmit:function(e){return t.handleSubmit(e)}},void 0,(0,u["default"])("div",{className:"form-group"},void 0,i,(0,u["default"])("input",{type:"text",className:"form-control",name:"title",placeholder:"请输入标题...",onChange:this.handleChange,value:this.state.title})),(0,u["default"])("div",{className:"form-group"},void 0,r,(0,u["default"])("textarea",{name:"content",className:"form-control",rows:"3",placeholder:"请输入内容...",onChange:this.handleChange,value:this.state.content},void 0)),(0,u["default"])("div",{role:"group",className:"btn-group btn-group-justified"},void 0,(0,u["default"])("div",{className:"btn-group",role:"group"},void 0,(0,u["default"])("button",{type:"button",className:"btn btn-warning",onClick:function(){return t.context.router.goBack()}},void 0,s," 取消")),d))};var l=a(1),i=(n(l),(0,u["default"])("label",{htmlFor:"title"},void 0,"标题")),r=(0,u["default"])("label",{htmlFor:"content"},void 0,"内容"),s=(0,u["default"])("span",{className:"glyphicon glyphicon-arrow-left"}),d=(0,u["default"])("div",{className:"btn-group",role:"group"},void 0,(0,u["default"])("button",{type:"submit",className:"btn btn-success"},void 0,"提交 ",(0,u["default"])("span",{className:"glyphicon glyphicon-ok"})))}});